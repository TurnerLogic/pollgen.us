{{#yield-styles}}
<link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>
<style>
#search-btn, #search-input{
	height: 50px;
}

#search-btn {
	border-radius: 5px 0px 0px 5px;
	border-left: 5px solid #1E9FB4;
	border-top: 5px solid #1E9FB4;
	border-bottom: 5px solid #1E9FB4;
	background-color: #1E9FB4;
	color: white;
	margin-left: 0px;
}

#search-input {
	border: 5px solid #1E9FB4;
	border-radius: 0px 5px 5px 0px;
	text-align: center;
	font-family: "Montserrat", sans-serif;
	font-size: 14pt;
	color: #1E9FB4;
}

#poll-create-btn {
	height: 50px;
	background-color: white;
	border: 5px solid #1E9FB4;
	color: #1E9FB4;
	font-family: 'Montserrat';
	font-weight: 100;
}

#period {
	color: #1E9FB4;
}

</style>
{{/yield-styles}}

<!--===================== LANDING SCREEN =====================-->
<section id="home">
	<div id="particles">
		<div class="cont-area">
			<div class="container banner-area">
				<ul class="slides clearfix">
					<li>
						<h1>Poll Geni<span id="period">.</span>us</h1>
						<h5></h5>
							<div class="row">
								<div class="col-md-4 col-md-offset-4">
								<form action="/" method="POST">
									<div class="input-group">
										<span class="input-group-btn">
											<button id="search-btn" class="btn btn-default" type="submit"><span class='glyphicon glyphicon-search'></span></button>
										</span>
										<input id="search-input" type="text" class="form-control" name="code" placeholder="Enter a unique code...">
									</div><!-- /input-group -->
								</form>
								</div>
							</div>
						<a id="poll-create-btn" href="/polls/create" class="button-large">Create</a>
					</li>
				</ul>
			</div>
		</div>
		<div class="banner-btm-img"><img src="img/buildings.png" alt=""></div>
	</div>
</section>
<!-- ============================================================================= -->

<!--============================ ABOUT SECTION OF PAGE ============================-->
<section class="about-area" id="about">
	<div class="about-top-area">
		<div class="container">
			<div class="row colum-contents clearfix">
				<div class="col-md-6 col-conts animated" data-animation="fadeInLeft" data-animation-delay="200">
				<h1 class="animated" data-animation="fadeInUp" data-animation-delay="100">This<br>is<br>Poll<br>Genius</h1>
				</div>
				<div class="col-md-6 col-conts animated" data-animation="fadeInLeft" data-animation-delay="200">
					<canvas class="animated" id="canvas" width="400" height="300"/>
				</div>
					<h4>Polls for the People <br>
						by the People</h4>
					<p>Whether you're driven by curiosity or analytics, Pollgeni.us is the bespoke polling platform for you.
					Tailor polls to your target demographic or submit questions to the anonymous masses and watch your
					results update in real-time. Further engage your audience through the Pollgeni.us chat room
					and read your participants' rationales. Share unique codes via Twitter and Facebook to redirect traffic to your poll.
					Publish a series of polls to fine tune your data and differentiate the signal from the noise.</p>
			</div>
		</div>
</section>
<!-- ======================================================================= -->

<!--========================= STASTICAL AREA OF PAGE ========================-->
	<section class="statistics-main">
		<div class="solid-bg">
			<div class="container">
				<div class="row clearfix">
					<div class="col-md-3 col-cont animated" data-animation="fadeInRight" data-animation-delay="200">
						<span class="icon-cont"><i class="fa fa-heart"></i></span>
						<span class="count-txt">{{meta.totalPolls}}</span>
						<hr>
						<span class="count-btm">Polls</span>
					</div>
					<div class="col-md-3 col-cont animated" data-animation="fadeInRight" data-animation-delay="400">
						<span class="icon-cont"><i class="fa fa-star"></i></span>
						<span class="count-txt" id="poll-submissions">{{meta.totalSubmissions}}</span>
						<hr>
						<span class="count-btm">Poll Submissions</span>
					</div>
					<div class="col-md-3 col-cont animated" data-animation="fadeInRight" data-animation-delay="600">
						<span class="icon-cont"><i class="fa fa-map-marker"></i></span>
						<span class="count-txt">108</span>
						<hr>
						<span class="count-btm">Votes</span>
					</div>
					<div class="col-md-3 col-cont animated" data-animation="fadeInRight" data-animation-delay="800">
						<span class="icon-cont"><i class="fa fa-user-secret"></i></span>
						<span class="count-txt">{{meta.activeUsers}}</span>
						<hr>
						<span class="count-btm">Active Users</span>
					</div>
				</div>
			</div>
		</div>
	</section>
<!-- ========================================================================== -->


<!--========================= SECTION FOR POPULAR POLLS ========================-->
	<section class="services-main" id="services">
		<div class="container">
			<h2 class="animated">Popular Polls</h2>
			<div class="row service-all clearfix" ng-controller="appCtrl">
				<div class="col-md-4 service-single" ng-repeat="eachPoll in polls | first: 3">
					<canvas id="doughnut" class="chart chart-doughnut" data="eachPoll.data"
					labels="eachPoll.labels"></canvas>
					<h5>{% eachPoll.title %}</h5>
					<div id="allPolls"></div>
					<voteOptions></voteOptions>
				</div>
			</div>
		</div>
	</section>
<!-- =========================================================================== -->
<!--=========================== FOOTER AREA OF PAGE =============================-->
<!-- ============================================================================== -->



<!-- MODEL FOR CREATING POLL -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
	<div class="modal-content" ng-controller="appCtrl">
	  <div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
		<h4 class="modal-title" id="myModalLabel">Create A Poll</h4>
	  </div>
	  <div id="poll-creation" class="modal-body">
			<div class="row" id="inputOptions">
				<div class="col-md-12">
					<input class="form-control" placeholder="What is the poll?" ng-model="poll.title">
				</div>
					<div class=" col-md-6">
					<br>
					   <input class="form-control col-md-6" placeholder="What is the first option?" ng-model="poll.option[0]">
					</div>
					<div class="col-md-6">
					<br>
					   <input class="form-control col-md-6" placeholder="What is the second option?" ng-model="poll.option[1]">
					</div>
			</div>
			<div class="container">
				<br>
				  <button class="btn btn-primary btn-blue" addChoice>Add Option</button>
			</div>

	  </div>
	  <div class="modal-footer">
			<button class="btn btn-primary btn-blue" ng-click="addPoll()">Add Poll</button>
	  </div>
	</div>
  </div>
</div>
<!-- =================================================================================== -->

{{#yield-scripts}}
	<script type="text/javascript" src="js/chart.min.js"></script><!-- chart js -->
	<script src="/socket.io/socket.io.js"></script>
    <script type="text/javascript">
            var myColor = ["#ECD078","#D95B43","#C02942","#542437","#53777A","#5B43B2","#245437"];
            var myData = [65,45,25,35,104,99,80];
            var socket = io();

            function getTotal(){
                var myTotal = 0;
                for (var j = 0; j < myData.length; j++) {
                    myTotal += (typeof myData[j] == 'number') ? myData[j] : 0;
                }
                return myTotal;
            }

            function plotData() {
                var canvas;
                var ctx;
                var lastend = 0;
                var myTotal = getTotal();

                canvas = document.getElementById("canvas");
                ctx = canvas.getContext("2d");
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                for (var i = 0; i < myData.length; i++) {
                    ctx.fillStyle = myColor[i];
                    ctx.beginPath();
                    ctx.moveTo(200,150);
                    ctx.arc(200,150,150,lastend,lastend+
                      (Math.PI*2*(myData[i]/myTotal)),false);
                    ctx.lineTo(200,150);
                    ctx.fill();
                    lastend += Math.PI*2*(myData[i]/myTotal);
                }
            }

            plotData();

            socket.on('poll submission', function() {
            	console.log('poll submissions');
            	console.log();
            	var currentValue = parseInt($( '#poll-submissions' ).text(), 10);
            	currentValue++;
            	$( '#poll-submissions').text(currentValue);
            });

    </script><!-- for canvas element -->

    <script type="text/javascript" src="/js/particle.min.js"></script><!-- Particle Header Js -->
	<script type="text/javascript" src="/js/particle.js"></script><!-- Particle Header Js -->
{{/yield-scripts}}